webpackJsonp([2],{Fs8J:function(t,e,a){"use strict";var i=a("mtWM"),l=a.n(i),s=a("7zck");a.n(s);e.a={data:function(){return{opendialog:!1,dialog:!1,cust_email_dialog:null,randomNumber:0,tabs:null,date:null,date2:null,menu:!1,menu2:!1,valid:!0,depart:"",departRules:[function(t){return!!t||"Depart City is required"}],arrive:"",arriveRules:[function(t){return!!t||"Depart City is required"}],flight_num:"",flightnumRules:[function(t){return!!t||"Depart City is required"}],headers:[{text:"Departure Airport",value:"departure_airport"},{text:"Departure Time",value:"departure_time",sortable:!1},{text:"Arrival Airport",value:"arrival_airport"},{text:"Arrival Time",value:"arrival_time",sortable:!1},{text:"Airline",value:"airline_name",sortable:!1},{text:"Flight Number",value:"flight_num",sortable:!1},{text:"Price",value:"price"},{text:"Buy",value:"buyitem"}],items:[],submitbtn:!1,session:""}},created:function(){this.$login="customer"},methods:{submit:function(){var t=this;if(this.submitbtn=!0,console.log("thisRef",this.$refs.form.validate()),console.log("thisRef",this.$refs.form2.validate()),this.$refs.form.validate()){console.log("this.depart",this.depart),console.log("this.arrive",this.arrive),console.log("this.date",this.date);var e={depart:this.depart,arrive:this.arrive,date:this.date};l.a.post("http://localhost:5000/api/getflights",e).then(function(e){var a=e.data;t.items=a,console.log("reponse",t.items)}).catch(function(t){console.log("getting flights --\x3e",t)})}if(this.$refs.form2.validate()){console.log("this.depart",this.flight_num),console.log("this.arrive",this.date2);var e={flight_num:this.flight_num,date:this.date2};l.a.post("http://localhost:5000/api/getflights",e).then(function(e){var a=e.data;console.log(a),t.items=a}).catch(function(t){console.log("getting flights --\x3e",t)})}},clear:function(){console.log(this.getSessionVars()),this.$refs.form.reset()},buyItem:function(t){this.items.indexOf(t);console.log("item",t);var e=confirm("Are you sure you want to buy this item?");if(console.log("this.$login",this.$login),null==this.$login&&1==e&&(console.log("hellonull"),confirm("Make sure to log in first")),"customer"==this.$login&&1==e){console.log("val",e);var a={airline_name:t.airline_name,flight_num:t.flight_num},i=this;l.a.post("http://localhost:5000/purchase/ticket",a).then(function(t){var e=t.data;console.log("response ",e),"false"==e.success?i.$swal({title:"Error",text:e.message,type:"warning"}):(e.success="true")&&i.$swal("Great!","You have bought the ticket~","success")}).catch(function(t){console.log("getting flights --\x3e",t),i.$swal({title:"Error",text:"Please try again",type:"warning"})})}"booking_agent"==this.$login&&1==e&&(console.log("val",e),this.opendialog=!0,this.dialog=!0,this.buyItemCustomer(e))},submitE:function(){console.log("this.cust",this.cust_email_dialog),this.dialog=!1},buyItemCustomer:function(t){var e=this.cust_email_dialog;console.log("email",e);var a={airline_name:t.airline_name,flight_num:t.flight_num,cutomer_email:this.cust_email_dialog};l.a.post("http://localhost:5000/purchase/ticket",a).then(function(t){var e=t.data;console.log(e),$this.$swal("You have bought the ticket~","success")}).catch(function(t){console.log("getting flights --\x3e",t),$this.$swal({title:"Error",text:"Please try again",type:"warning"})})},getSessionVars:function(){var t=this;l.a.post("http://localhost:5000/session/vars").then(function(e){var a=e.data;console.log("res",a),t.session=a}).catch(function(t){console.log("getting session vars--\x3e",t)})}}}},G6yX:function(t,e,a){e=t.exports=a("FZ+f")(!0),e.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"Home.vue",sourceRoot:""}])},lFpq:function(t,e,a){var i=a("G6yX");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("ed6b9f7e",i,!0,{})},lO7g:function(t,e,a){"use strict";function i(t){a("lFpq")}Object.defineProperty(e,"__esModule",{value:!0});var l=a("Fs8J"),s=a("szit"),r=a("VU/8"),o=i,n=r(l.a,s.a,!1,o,"data-v-21d5c2f0",null);e.default=n.exports},szit:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-app",[a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),t._v(" "),a("v-layout",{attrs:{row:"",wrap:"","justify-center":""}},[a("v-flex",{attrs:{xs5:""}},[a("v-tabs",{attrs:{centered:"",color:"cyan",dark:"","slider-color":"yellow"},model:{value:t.tabs,callback:function(e){t.tabs=e},expression:"tabs"}},[a("v-tab",{attrs:{ripple:""}},[t._v("\n              Search for Flights\n            ")]),t._v(" "),a("v-tab",{attrs:{ripple:""}},[t._v("\n              Check Flight Status\n            ")]),t._v(" "),a("v-tab-item",[a("v-layout",{attrs:{row:"",wrap:"","justify-center":""}},[a("v-flex",{attrs:{xs7:""}},[a("br"),a("h2",[t._v(" Search for Flights")]),t._v(" "),a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{label:"Depart From",rules:t.departRules,required:""},model:{value:t.depart,callback:function(e){t.depart=e},expression:"depart"}}),t._v(" "),a("v-text-field",{attrs:{label:"Arrive At",rules:t.arriveRules,required:""},model:{value:t.arrive,callback:function(e){t.arrive=e},expression:"arrive"}}),t._v(" "),a("v-menu",{ref:"menu",attrs:{lazy:"","close-on-content-click":!1,transition:"scale-transition","offset-y":"","full-width":"","nudge-right":40,"min-width":"290px","return-value":t.date},on:{"update:returnValue":function(e){t.date=e}},model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[a("v-text-field",{attrs:{slot:"activator",label:"Depart Date",readonly:""},slot:"activator",model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),t._v(" "),a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}},[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){t.menu=!1}}},[t._v("Cancel")]),t._v(" "),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){t.$refs.menu.save(t.date)}}},[t._v("OK")])],1)],1),t._v(" "),a("br"),t._v(" "),a("v-btn",{attrs:{disabled:!t.valid},on:{click:t.submit}},[t._v("submit")]),t._v(" "),a("v-btn",{on:{click:t.clear}},[t._v("clear")])],1)],1)],1)],1),t._v(" "),a("v-tab-item",[a("v-layout",{attrs:{row:"",wrap:"","justify-center":""}},[a("v-flex",{attrs:{xs7:""}},[a("br"),a("h2",[t._v(" Check Status")]),t._v(" "),a("v-form",{ref:"form2",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{label:"Flight Number",rules:t.flightnumRules,required:""},model:{value:t.flight_num,callback:function(e){t.flight_num=e},expression:"flight_num"}}),t._v(" "),a("v-menu",{ref:"menu2",attrs:{lazy:"","close-on-content-click":!1,transition:"scale-transition","offset-y":"","full-width":"","nudge-right":40,"min-width":"290px","return-value":t.date2},on:{"update:returnValue":function(e){t.date2=e}},model:{value:t.menu2,callback:function(e){t.menu2=e},expression:"menu2"}},[a("v-text-field",{attrs:{slot:"activator",label:"Depart / Arrive Date",readonly:""},slot:"activator",model:{value:t.date2,callback:function(e){t.date2=e},expression:"date2"}}),t._v(" "),a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.date2,callback:function(e){t.date2=e},expression:"date2"}},[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){t.menu2=!1}}},[t._v("Cancel")]),t._v(" "),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){t.$refs.menu2.save(t.date2)}}},[t._v("OK")])],1)],1),t._v(" "),a("br"),t._v(" "),a("v-btn",{attrs:{disabled:!t.valid},on:{click:t.submit}},[t._v("submit")]),t._v(" "),a("v-btn",{on:{click:t.clear}},[t._v("clear")])],1)],1)],1)],1)],1)],1)],1),t._v(" "),a("v-layout",{attrs:{row:"",wrap:"","justify-center":""}},[1==this.submitbtn?a("div",{staticClass:"dtable"},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.items,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.departure_airport))]),t._v(" "),a("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.departure_time))]),t._v(" "),a("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.arrival_airport))]),t._v(" "),a("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.arrival_time))]),t._v(" "),a("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.airline_name))]),t._v(" "),a("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.flight_num))]),t._v(" "),a("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.price))]),t._v(" "),a("td",{staticClass:"justify-center layout px-0"},[a("v-btn",{staticClass:"mx-0",attrs:{icon:""},on:{click:function(a){t.buyItem(e.item)}}},[a("v-icon",{attrs:{color:"pink"}},[t._v("add")])],1)],1)]}}])})],1):t._e()]),t._v(" "),t.opendialog?a("div",[a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[t._v("\n              Input customer email\n            ")]),t._v(" "),a("v-form",{ref:"formE",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{label:"Customer Email",required:""},model:{value:t.cust_email_dialog,callback:function(e){t.cust_email_dialog=e},expression:"cust_email_dialog"}}),t._v(" "),a("v-card-actions",[a("v-btn",{attrs:{disabled:!t.valid},on:{click:t.submitE}},[t._v("submit")]),t._v(" "),a("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(e){e.stopPropagation(),t.dialog=!1}}},[t._v("Close")])],1)],1)],1)],1)],1):t._e()],1)],1)},l=[],s={render:i,staticRenderFns:l};e.a=s}});
//# sourceMappingURL=2.9a2a0e219e4bc068df14.js.map